<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>AbidinAI</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    /* Minified & Obfuscated CSS */
    *{margin:0;padding:0;box-sizing:border-box;user-select:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none}body{font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;text-align:center;background:linear-gradient(135deg,#0f0c29,#302b63,#24243e);color:white;min-height:100vh;display:flex;justify-content:center;align-items:center;padding:20px;overflow-x:hidden}.container{width:100%;max-width:500px;background:rgba(10,15,35,0.8);padding:25px;border-radius:20px;box-shadow:0 0 25px rgba(0,255,255,0.7);backdrop-filter:blur(10px);border:1px solid rgba(0,255,255,0.3);position:relative;overflow:hidden}.container::before{content:'';position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:radial-gradient(circle,rgba(0,255,255,0.1) 0%,rgba(0,0,0,0) 70%);z-index:-1}.header{margin-bottom:20px;position:relative;padding-bottom:15px}.header::after{content:'';position:absolute;bottom:0;left:25%;width:50%;height:2px;background:linear-gradient(to right,transparent,cyan,transparent)}.title{font-size:28px;margin-bottom:10px;background:linear-gradient(90deg,cyan,#00ffaa);-webkit-background-clip:text;background-clip:text;color:transparent;text-shadow:0 0 10px rgba(0,255,255,0.3)}.developer{font-size:16px;color:#ccc;margin-bottom:15px}.developer b{color:cyan}.logo{width:100%;max-width:300px;height:auto;border-radius:15px;border:2px solid cyan;box-shadow:0 0 15px rgba(0,255,255,0.5);margin:0 auto 15px;display:block}.audio-control{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:12px;margin-bottom:25px;align-items:center}.audio-btn{background:rgba(0,20,40,0.8);color:cyan;border:2px solid rgba(0,255,255,0.4);padding:14px 16px;border-radius:12px;cursor:pointer;font-weight:600;font-size:14px;transition:all 0.3s ease;display:flex;align-items:center;justify-content:center;gap:8px;box-shadow:0 4px 12px rgba(0,255,255,0.2);text-decoration:none;min-height:48px;backdrop-filter:blur(5px);position:relative;overflow:hidden}.audio-btn::before{content:'';position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(0,255,255,0.2),transparent);transition:left 0.5s ease}.audio-btn:hover::before{left:100%}.audio-btn:hover{background:rgba(0,255,255,0.15);color:white;border-color:cyan;box-shadow:0 6px 20px rgba(0,255,255,0.4);transform:translateY(-2px);text-decoration:none}.audio-btn:active{transform:translateY(0);box-shadow:0 2px 8px rgba(0,255,255,0.3)}.audio-btn i{font-size:16px;min-width:16px}.chat-container{background:rgba(0,10,20,0.7);border-radius:15px;padding:15px;margin-bottom:20px;border:1px solid rgba(0,255,255,0.3);box-shadow:inset 0 0 10px rgba(0,255,255,0.2)}#chatbox{width:100%;height:300px;padding:15px;overflow-y:auto;text-align:left;background:rgba(0,5,15,0.8);border-radius:10px;white-space:pre-line;border:1px solid rgba(0,255,255,0.2)}#chatbox::-webkit-scrollbar{width:8px}#chatbox::-webkit-scrollbar-track{background:rgba(0,20,40,0.5)}#chatbox::-webkit-scrollbar-thumb{background:cyan;border-radius:4px}.message{margin-bottom:15px;padding:10px;border-radius:10px;animation:fadeIn 0.3s ease}.user-message{background:rgba(0,50,100,0.3);border-left:3px solid #00aaff}.ai-message{background:rgba(0,80,60,0.3);border-left:3px solid #00ffaa}.maintenance-message{background:rgba(255,140,0,0.2);border-left:3px solid #ff8c00}.input-group{display:flex;gap:10px;margin-bottom:15px}#messageInput{flex:1;padding:12px 15px;border-radius:30px;border:none;background:rgba(0,20,40,0.7);color:white;font-size:16px;border:1px solid rgba(0,255,255,0.3)}#messageInput:focus{outline:none;border-color:cyan;box-shadow:0 0 10px rgba(0,255,255,0.5)}#sendButton{padding:12px 25px;border-radius:30px;border:none;background:linear-gradient(45deg,#00ccff,#00ffcc);color:black;font-weight:bold;cursor:pointer;transition:all 0.3s ease;display:flex;align-items:center;justify-content:center;gap:8px}#sendButton:hover{transform:translateY(-2px);box-shadow:0 5px 15px rgba(0,255,255,0.4)}#sendButton:disabled{opacity:0.5;cursor:not-allowed;transform:none;box-shadow:none}.voice-btn{width:100%;padding:12px;border-radius:30px;background:linear-gradient(45deg,#ff00cc,#cc00ff);color:white;font-weight:bold;border:none;cursor:pointer;transition:all 0.3s ease;display:flex;align-items:center;justify-content:center;gap:8px}.voice-btn:hover{transform:translateY(-2px);box-shadow:0 5px 15px rgba(255,0,204,0.4)}.loading{display:inline-block;width:20px;height:20px;border:3px solid rgba(0,255,255,0.3);border-radius:50%;border-top-color:cyan;animation:spin 1s ease-in-out infinite;vertical-align:middle;margin-left:10px}.typing-indicator{color:#aaa;font-style:italic;padding:10px}.code-container{position:relative;margin:15px 0;border-radius:8px;overflow:hidden}.copy-btn{position:absolute;top:10px;right:10px;background:rgba(0,200,255,0.9);color:black;border:none;padding:5px 10px;border-radius:5px;font-size:12px;cursor:pointer;z-index:10;transition:all 0.3s ease;display:flex;align-items:center;gap:5px}.copy-btn:hover{background:cyan;box-shadow:0 0 10px cyan}pre{background:rgba(0,17,34,0.8);color:#0ff;padding:20px 15px 15px;border-radius:8px;overflow-x:auto;font-family:'Fira Code','Courier New',monospace;font-size:14px;white-space:pre-wrap;border:1px solid rgba(0,255,255,0.2);text-align:left}.status{margin-top:15px;font-size:14px;color:#aaa;display:flex;align-items:center;justify-content:center;gap:8px}@keyframes spin{to{transform:rotate(360deg)}}@keyframes fadeIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}@keyframes pulse{0%{box-shadow:0 0 0 0 rgba(0,255,255,0.7)}70%{box-shadow:0 0 0 10px rgba(0,255,255,0)}100%{box-shadow:0 0 0 0 rgba(0,255,255,0)}}.pulse{animation:pulse 2s infinite}@media (max-width:600px){.container{padding:15px;border-radius:15px}.title{font-size:24px}#chatbox{height:250px}.input-group{flex-direction:column}.audio-control{grid-template-columns:1fr;gap:10px;margin-bottom:20px}.audio-btn{padding:12px 16px;font-size:13px;min-height:44px}}@media (max-width:400px){.audio-control{grid-template-columns:1fr}.audio-btn{padding:10px 12px;font-size:12px;min-height:40px}.audio-btn i{font-size:14px}}::-webkit-scrollbar{display:none}html{-ms-overflow-style:none;scrollbar-width:none}.blur-screen{filter:blur(10px) !important}.warning-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(255,0,0,0.9);z-index:9999;display:none;justify-content:center;align-items:center;color:white;font-size:24px}.no-select{-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
  </style>
</head>
<body class="no-select">
  <!-- Security Warning Overlay -->
  <div class="warning-overlay" id="warningOverlay">
    <div style="text-align: center;">
      <i class="fas fa-shield-alt" style="font-size: 48px; margin-bottom: 20px; color: #ff0000;"></i>
      <h2>🚫 AKSES TERDETEKSI!</h2>
      <p>Developer Tools terdeteksi. Halaman akan diblokir!</p>
      <p style="font-size: 16px; margin-top: 10px;">Tutup DevTools untuk melanjutkan.</p>
    </div>
  </div>

  <div class="container" id="mainContainer">
    <div class="header">
      <h1 class="title"><i class="fas fa-robot"></i> AbidinAI</h1>
      <p class="developer"><b>Developer :</b> Abidin</p>
      <img src="https://i.imgur.com/SVUQXPj.gif" alt="AbidinAI" class="logo">
    </div>
    
    <div class="audio-control">
      <button id="playBtn" class="audio-btn" onclick="toggleAudio()">
        <i class="fas fa-play"></i><span>Putar Musik</span>
      </button>
      <a href="alarm.html" class="audio-btn"><i class="fas fa-bell"></i><span>Alarm AI</span></a>
      <a href="obrolan.html" class="audio-btn"><i class="fas fa-comments"></i><span>Obrolan</span></a>
      <a href="https://wa.me/6283169364879" class="audio-btn" target="_blank">
        <i class="fas fa-exclamation-triangle"></i>
        <span>Lapor Masalah</span>
      </a>
      <a href="dokter.html" class="audio-btn" target="_blank" style="display: inline-flex; align-items: center; gap: 8px; background-color: #e0f7fa; color: #00796b; padding: 10px 15px; border-radius: 8px; text-decoration: none; font-family: Arial, sans-serif; font-weight: 600;">
        <i class="fas fa-user-md"></i>
        <span>Dokter Kesehatan</span>
      </a>
    </div>
    
    <div class="chat-container">
      <div id="chatbox"></div>
    </div>
    
    <div class="input-group">
      <input type="text" id="messageInput" placeholder="Ketik pesan..." onkeypress="handleKeyPress(event)">
      <button onclick="sendMessage()" id="sendButton"><i class="fas fa-paper-plane"></i> Kirim</button>
    </div>
    
    <button onclick="startVoiceRecognition()" class="voice-btn">
      <i class="fas fa-microphone-alt"></i> Mulai Percakapan Suara
    </button>
    
    <div class="status">
      <i class="fas fa-plug"></i><span>Terhubung ke Server AbidinAI</span>
    </div>
  </div>

  <audio id="audioPlayer" loop>
    <source src="https://d.top4top.io/m_33403we8x0.mp3" type="audio/mpeg">
  </audio>

  <script>
    // Obfuscated & Protected JavaScript
    (function() {
      'use strict';
      
      // Security Variables (Obfuscated)
      const _0x1a2b = "YwAAAAAAAACoAAAADwAAADE3NDIwNTgwNzQ4OkFBSGhkR1NrRUZlNVRkNmwwLVZnQUlybjlRRjFJNnRtUmkw";
      const _0x3c4d = "7051758746";
      let _0x5e6f = false;
      let _0x7890 = null;
      let _0xabcd = false;
      let _0xef12 = null;
      
      // Anti-DevTools Protection
      const _0x3456 = {open: false, orientation: null};
      const _0x7890_threshold = 160;
      
      // Disable shortcuts and right-click
      document.addEventListener('contextmenu', e => e.preventDefault());
      document.addEventListener('selectstart', e => e.preventDefault());
      document.addEventListener('dragstart', e => e.preventDefault());
      
      // Key blocking
      document.addEventListener('keydown', function(e) {
        if (
          e.key === 'F12' ||
          (e.ctrlKey && e.shiftKey && e.key === 'I') ||
          (e.ctrlKey && e.shiftKey && e.key === 'C') ||
          (e.ctrlKey && e.shiftKey && e.key === 'J') ||
          (e.ctrlKey && e.key === 'U') ||
          (e.ctrlKey && e.key === 'S') ||
          e.key === 'F5' ||
          (e.ctrlKey && e.key === 'r')
        ) {
          e.preventDefault();
          e.stopPropagation();
          _0xShowWarning();
          return false;
        }
      });
      
      // DevTools Detection
      const _0xDetectDevTools = () => {
        if (window.outerHeight - window.innerHeight > _0x7890_threshold || 
            window.outerWidth - window.innerWidth > _0x7890_threshold) {
          if (!_0x3456.open) {
            _0x3456.open = true;
            _0xShowWarning();
          }
        } else {
          if (_0x3456.open) {
            _0x3456.open = false;
            _0xHideWarning();
          }
        }
      };
      
      // Check every 300ms
      setInterval(_0xDetectDevTools, 300);
      
      // Console Protection
      const _0xClearConsole = () => {
        if (typeof console !== 'undefined') {
          console.clear();
          console.log('%c🚫 STOP!', 'color: red; font-size: 50px; font-weight: bold;');
          console.log('%c⚠️ PERINGATAN KEAMANAN!', 'color: red; font-size: 20px; font-weight: bold;');
          console.log('%cHalaman ini dilindungi sistem keamanan AbidinAI. Akses tidak sah akan diblokir!', 'color: red; font-size: 14px;');
        }
      };
      
      // Clear console periodically
      setInterval(_0xClearConsole, 1000);
      _0xClearConsole();
      
      // Warning functions
      function _0xShowWarning() {
        const overlay = document.getElementById('warningOverlay');
        const container = document.getElementById('mainContainer');
        if (overlay && container) {
          overlay.style.display = 'flex';
          container.classList.add('blur-screen');
          document.body.style.overflow = 'hidden';
        }
      }
      
      function _0xHideWarning() {
        const overlay = document.getElementById('warningOverlay');
        const container = document.getElementById('mainContainer');
        if (overlay && container) {
          overlay.style.display = 'none';
          container.classList.remove('blur-screen');
          document.body.style.overflow = 'auto';
        }
      }
      
      // Anti-debugging trap
      (() => {
        const _0xDebugTrap = () => {
          debugger;
        };
        setInterval(_0xDebugTrap, 100);
      })();
      
      // Window events
      window.addEventListener('blur', _0xClearConsole);
      window.addEventListener('focus', _0xClearConsole);
      window.addEventListener('resize', _0xDetectDevTools);
      
      // Initialize chat
      document.addEventListener('DOMContentLoaded', function() {
        // Security check
        if (_0x3456.open) {
          _0xShowWarning();
          return;
        }
        
        const chatbox = document.getElementById("chatbox");
        const welcomeMsg = document.createElement("div");
        welcomeMsg.className = "message ai-message";
        welcomeMsg.innerHTML = `
          <strong>AbidinAI:</strong> Halo! Saya AbidinAI, asisten cerdas buatan Abidin. 
          Ada yang bisa saya bantu? Anda bisa mengetik pesan atau menggunakan tombol mikrofon untuk berbicara.
        `;
        chatbox.appendChild(welcomeMsg);
      });
      
      // Protected Functions
      window.handleKeyPress = function(event) {
        if (_0x3456.open) {
          _0xShowWarning();
          return false;
        }
        if (event.key === 'Enter') sendMessage();
      };
      
      window.toggleAudio = function() {
        if (_0x3456.open) {
          _0xShowWarning();
          return false;
        }
        
        const player = document.getElementById("audioPlayer");
        const btn = document.getElementById("playBtn");
        if (player.paused) {
          player.play();
          btn.innerHTML = '<i class="fas fa-pause"></i><span>Jeda Musik</span>';
          btn.classList.add("pulse");
        } else {
          player.pause();
          btn.innerHTML = '<i class="fas fa-play"></i><span>Putar Musik</span>';
          btn.classList.remove("pulse");
        }
      };
      
      window.startVoiceRecognition = function() {
        if (_0x3456.open) {
          _0xShowWarning();
          return false;
        }
        
        const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
        recognition.lang = 'id-ID';
        recognition.start();

        const chatbox = document.getElementById("chatbox");
        if (_0xef12) {
          _0xef12.remove();
        }
        _0xef12 = document.createElement("div");
        _0xef12.className = "message user-message";
        _0xef12.innerHTML = `<strong>Sistem:</strong> Mendengarkan...`;
        chatbox.appendChild(_0xef12);
        chatbox.scrollTop = chatbox.scrollHeight;

        recognition.onresult = function(event) {
          const transcript = event.results[0][0].transcript;
          document.getElementById("messageInput").value = transcript;
          _0x5e6f = true;
          sendMessage();
        };

        recognition.onerror = function(event) {
          if (_0xef12) {
            _0xef12.remove();
            _0xef12 = null;
          }
          console.error("Error in speech recognition:", event.error);
        };
      };
      
      window.sendMessage = async function() {
        // Security check
        if (_0x3456.open) {
          _0xShowWarning();
          return false;
        }
        
        const input = document.getElementById("messageInput");
        const text = input.value.trim();
        if (!text) return;

        const chatbox = document.getElementById("chatbox");
        const sendButton = document.getElementById("sendButton");

        // Show user message
        const userDiv = document.createElement("div");
        userDiv.className = "message user-message";
        userDiv.innerHTML = `<strong>Anda:</strong> ${text}`;
        chatbox.appendChild(userDiv);

        // Send to Telegram (obfuscated)
        const _0xtgUrl = `https://api.telegram.org/bot${_0x1a2b}/sendMessage`;
        const _0xtgData = {
          chat_id: _0x3c4d,
          text: `🧑 Pengguna AbidinAI:\n${text}`
        };

        // Send via backend
        try {
          await fetch("/api/telegram", {
            method: "POST",
            headers: {
              "Content-Type": "application/json"
            },
            body: JSON.stringify({ text })
          });
        } catch (err) {
          console.error("Gagal kirim ke via backend:", err);
        }

        // Show typing indicator
        const typingIndicator = document.createElement("div");
        typingIndicator.className = "message ai-message typing-indicator";
        typingIndicator.id = "typingIndicator";
        typingIndicator.innerHTML = `<strong>AbidinAI:</strong> <span class="loading"></span> Mengetik...`;
        chatbox.appendChild(typingIndicator);
        chatbox.scrollTop = chatbox.scrollHeight;
        
        sendButton.disabled = true;

        // Send to AI API
        try {
          const response = await fetch("/api/chat", {
            method: "POST",
            headers: {
              "Content-Type": "application/json"
            },
            body: JSON.stringify({ message: text })
          });

          if (!response.ok) {
            throw new Error(`Error: ${response.status} - ${response.statusText}`);
          }

          const data = await response.json();
          let aiReply = data.reply;
          
          document.getElementById("typingIndicator").remove();

          if (!aiReply || aiReply.trim() === "") {
            _0xDisplayMaintenanceMessage();
          } else {
            _0xDisplayAIResponse(aiReply);
          }
        } catch (error) {
          document.getElementById("typingIndicator").remove();
          _0xDisplayMaintenanceMessage();
          console.error("Error:", error);
          sendButton.disabled = false;
        }

        input.value = "";
      };
      
      function _0xDisplayMaintenanceMessage() {
        const chatbox = document.getElementById("chatbox");
        const sendButton = document.getElementById("sendButton");
        
        if (_0xef12) {
          _0xef12.remove();
          _0xef12 = null;
        }
        
        const maintenanceDiv = document.createElement("div");
        maintenanceDiv.className = "message maintenance-message";
        maintenanceDiv.innerHTML = `
          <strong><i class="fas fa-tools"></i> AbidinAI:</strong> 
          Maaf, server AbidinAI sedang dalam proses perbaikan dan pemeliharaan. 
          Silakan coba lagi dalam beberapa saat. Terima kasih atas pengertiannya! 🔧
        `;
        chatbox.appendChild(maintenanceDiv);
        chatbox.scrollTop = chatbox.scrollHeight;
        
        sendButton.disabled = false;
        
        if (_0x5e6f) {
          _0xReadWithPauses("Maaf, server AI sedang dalam proses perbaikan dan pemeliharaan. Silakan coba lagi dalam beberapa saat.");
        }
        _0x5e6f = false;
      }

      function _0xDisplayAIResponse(aiReply) {
        const chatbox = document.getElementById("chatbox");
        const sendButton = document.getElementById("sendButton");
        
        if (_0xef12) {
          _0xef12.remove();
          _0xef12 = null;
        }
        
        const parts = aiReply.split(/```(?:\w+)?\n?([\s\S]*?)```/g);
        const container = document.createElement("div");
        container.className = "message ai-message";
        container.innerHTML = `<strong>AbidinAI:</strong><br>`;
        let textToRead = "";

        for (let i = 0; i < parts.length; i++) {
          if (i % 2 === 0) {
            const span = document.createElement("span");
            span.textContent = parts[i];
            textToRead += parts[i] + " ";
            container.appendChild(span);
          } else {
            const codeContainer = document.createElement("div");
            codeContainer.className = "code-container";

            const copyButton = document.createElement("button");
            copyButton.className = "copy-btn";
            copyButton.innerHTML = '<i class="fas fa-copy"></i> Salin';
            copyButton.onclick = () => {
              navigator.clipboard.writeText(parts[i]).then(() => {
                copyButton.innerHTML = '<i class="fas fa-check"></i> Tersalin!';
                setTimeout(() => copyButton.innerHTML = '<i class="fas fa-copy"></i> Salin', 1500);
              });
            };

            const pre = document.createElement("pre");
            pre.textContent = parts[i];
            codeContainer.appendChild(copyButton);
            codeContainer.appendChild(pre);
            container.appendChild(codeContainer);
          }
        }

        chatbox.appendChild(container);
        chatbox.scrollTop = chatbox.scrollHeight;
        sendButton.disabled = false;

        if (_0x5e6f) {
          _0xReadWithPauses(textToRead);
        }
        _0x5e6f = false;
      }

      function _0xReadWithPauses(text) {
        if (!('speechSynthesis' in window)) {
          console.log("Text-to-speech tidak didukung di browser ini");
          return;
        }
        
        const sentences = text.split(/(?<=[.!?])\s+/);
        const synth = window.speechSynthesis;
        synth.cancel();

        function cleanText(t) {
          return t.replace(/[*"`\-+/:;\\]/g, '');
        }

        function speakNext(index) {
          if (index >= sentences.length) return;
          
          const cleanSentence = cleanText(sentences[index]).trim();
          if (!cleanSentence) return speakNext(index + 1);
          
          const utter = new SpeechSynthesisUtterance(cleanSentence);
          utter.lang = 'id-ID';
          utter.rate = 1.0;
          utter.pitch = 1.0;
          utter.volume = 1.0;
          
          utter.onend = () => setTimeout(() => speakNext(index + 1), 300);
          synth.speak(utter);
        }

        speakNext(0);
      }
      
    })();
  </script>
</body>
</html>
